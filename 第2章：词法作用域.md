+ 查找
1. 作用域查找始终从运行时所处的最内部作用域开始，逐级向外或者说向上进行，直到遇见第一个匹配的标识符为止。



+ eval 

```javascript
function foo(str, a) {
  eval(str);
  console.log(a, b);
}

var b = 2;

foo("var b = 3;", 1); // 1, 3
```



```javascript
function foo(str) {
  "use strict";
  eval(str);
  console.log(a); // ReferenceError: a is not defined
}
                                                                                                               
foo("var a = 2")
```

+ with

```javascript
var obj = {
  a: 1,
  b: 2,
  c: 3
};


obj.a = 2;
obj.b = 3;
obj.c = 4;

with(obj) {
  a = 3;
  b = 4;
  c = 5;
}
```



```javascript
function foo(obj) {
  with(obj) {
    a = 2;
  }
}

var o1 = {
  a: 3
};

var o2 = {
  b: 3
};

foo(o1);
console.log(o1.a); // 2

foo(o2);
console.log(o2.a); // undefined
console.log(a); // 2
```

总结：o2的作用域，foo()的作用域和全局作用域都没有找到标识符a, 因此当 a = 2 执行时，自动创建了一个全局变量。

